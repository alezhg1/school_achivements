<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="csrf-token" content="{{ csrf_token }}">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç - –ú–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è 444</title>
  <style>
    /* –°–ë–†–û–° –°–¢–ò–õ–ï–ô */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      background: white;
      font-family: "Segoe UI", Roboto, -apple-system, BlinkMacSystemFont, Arial, sans-serif;
      font-size: 13px;
      line-height: 1.3;
      overflow: hidden; /* –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É –Ω–∞ –≤—Å–µ–º —Å–∞–π—Ç–µ */
    }

    /* HEADER */
    header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: linear-gradient(90deg, #0077e6 0%, #005bb5 100%);
      color: #fff;
      z-index: 1200;
      box-shadow: 0 3px 8px rgba(3, 36, 74, 0.12);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 10px 12px;
      width: 100%;
      height: 55px;
    }

    .logo a {
      font-weight: 700;
      font-size: 1rem;
      color: #fff;
      text-decoration: none;
      white-space: nowrap;
    }

    nav {
      display: flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
      justify-content: flex-end;
      flex: 1;
    }

    nav a {
      color: rgba(255, 255, 255, 0.95);
      text-decoration: none;
      padding: 5px 7px;
      border-radius: 5px;
      font-weight: 600;
      transition: all 0.22s;
      font-size: 0.8rem;
      white-space: nowrap;
    }

    nav a:hover {
      background: rgba(255, 255, 255, 0.08);
      transform: translateY(-1px);
    }

    .logout-btn {
      background: rgba(220, 53, 69, 0.9);
      color: white;
      padding: 5px 8px;
      border-radius: 5px;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.75rem;
      border: none;
      cursor: pointer;
      white-space: nowrap;
      transition: all 0.3s ease;
      margin-left: 5px;
    }

    .logout-btn:hover {
      background: #dc3545;
      transform: translateY(-1px);
    }

    /* –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ */
    .main-content {
      display: flex;
      justify-content: center;
      align-items: center;
      height: calc(100vh - 55px);
      margin-top: 55px;
      box-sizing: border-box;
      padding: 15px;
      overflow: hidden; /* –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
    }

    /* –ö–û–ù–¢–ï–ô–ù–ï–† –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–ò */
    .auth-container {
      display: grid;
      grid-template-columns: 0.5fr 1.5fr;
      gap: 20px;
      max-width: 800px;
      width: 100%;
      animation: fadeIn 0.5s ease;
      align-self: center;
      overflow: hidden; /* –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
    }

    /* –õ–µ–≤—ã–π –±–ª–æ–∫ */
    .auth-info-card {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border: 1px solid #dee2e6;
      color: #333;
      padding: 20px 15px;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 15px;
      text-align: center;
      height: auto;
      overflow: hidden; /* –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
    }

    .auth-header h1 {
      font-size: 1.4rem;
      margin: 0;
      font-weight: 800;
      line-height: 1.2;
      color: #003366;
    }

    .platform-icon {
      font-size: 2rem;
      margin: 8px auto;
    }

    .platform-title {
      font-size: 1rem;
      font-weight: 600;
      color: #007bff;
      margin: 0;
    }

    .brief-description p {
      font-size: 0.75rem;
      color: #666;
      line-height: 1.3;
      margin: 0;
    }

    /* –°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é */
    .auth-switch {
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px solid #dee2e6;
    }

    .auth-switch p {
      color: #666;
      font-size: 0.75rem;
      margin: 0 0 6px 0;
    }

    .switch-link {
      display: inline-block;
      background: #007bff;
      color: white;
      padding: 6px 12px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.75rem;
      transition: all 0.3s ease;
    }

    .switch-link:hover {
      background: #0056b3;
      transform: translateY(-2px);
    }

    /* –ü—Ä–∞–≤—ã–π –±–ª–æ–∫ - –§–æ—Ä–º–∞ */
    .auth-form-card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.06);
      border: 1px solid #e9ecef;
      height: auto;
      overflow: hidden; /* –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
    }

    .auth-form {
      display: flex;
      flex-direction: column;
      gap: 15px;
      overflow: hidden; /* –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
    }

    /* –°–µ–∫—Ü–∏–∏ —Ñ–æ—Ä–º—ã */
    .form-section {
      display: flex;
      flex-direction: column;
      gap: 8px;
      overflow: hidden; /* –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
    }

    .form-section h3 {
      color: #003366;
      margin: 0;
      font-size: 0.9rem;
      font-weight: 600;
    }

    /* –ì—Ä—É–ø–ø—ã —Ñ–æ—Ä–º—ã */
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
      overflow: hidden; /* –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
    }

    .form-group label {
      font-weight: 600;
      color: #003366;
      font-size: 0.75rem;
    }

    .auth-form input:not([type="checkbox"]) {
      width: 100%;
      padding: 8px 10px;
      border: 1.5px solid #e8f4ff;
      border-radius: 6px;
      background: #f9fcff;
      font-size: 0.8rem;
      transition: all 0.3s ease;
      font-family: inherit;
    }

    .auth-form input:focus {
      border-color: #007bff;
      box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.1);
      outline: none;
      background: white;
    }

    .error-field {
      border-color: #dc3545 !important;
    }

    /* –û—à–∏–±–∫–∏ */
    .alert {
      padding: 8px 10px;
      border-radius: 6px;
      margin-bottom: 10px;
    }

    .alert-error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .field-errors {
      margin-top: 2px;
    }

    .error {
      color: #dc3545;
      font-size: 0.65rem;
      display: block;
    }

    /* –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è */
    .remember-group {
      display: flex;
      align-items: center;
      gap: 6px;
      overflow: hidden; /* –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
    }

    .remember-group input[type="checkbox"] {
      width: 12px;
      height: 12px;
      margin-top: 1px;
    }

    .remember-label {
      font-size: 0.75rem;
      color: #333;
      line-height: 1.2;
      cursor: pointer;
    }

    /* –ö–Ω–æ–ø–∫–∞ */
    .btn-primary {
      background: linear-gradient(135deg, #007bff, #0047b3);
      color: white;
      border: none;
      padding: 10px;
      font-weight: 600;
      border-radius: 7px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.85rem;
      margin-top: 5px;
      width: 100%;
    }

    .btn-primary:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3);
    }

    .btn-primary:disabled {
      opacity: 0.7;
      cursor: not-allowed;
      transform: none;
    }

    /* –§—É—Ç–µ—Ä —Ñ–æ—Ä–º—ã */
    .auth-footer {
      text-align: center;
      margin-top: 10px;
      color: #666;
      font-size: 0.7rem;
    }

    .auth-footer a {
      color: #007bff;
      font-weight: 600;
      text-decoration: none;
    }

    .auth-footer a:hover {
      text-decoration: underline;
    }

    /* –°—Å—ã–ª–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è */
    .forgot-password {
      text-align: right;
      margin-top: 5px;
    }

    .forgot-password a {
      color: #007bff;
      font-size: 0.7rem;
      text-decoration: none;
    }

    .forgot-password a:hover {
      text-decoration: underline;
    }

    /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .hidden {
      display: none !important;
    }

    /* –î–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
    @media (max-width: 768px) {
      .auth-container {
        grid-template-columns: 1fr;
        max-width: 95%;
        gap: 15px;
      }
      
      .auth-info-card {
        padding: 15px 12px;
        display: none;
      }
      
      .auth-form-card {
        padding: 15px;
      }
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –æ—à–∏–±–æ–∫ Django */
    .errorlist {
      list-style: none;
      padding: 0;
      margin: 4px 0 0 0;
      color: #dc3545;
      font-size: 0.65rem;
    }

    .errorlist li {
      margin-bottom: 2px;
    }
  </style>
</head>
<body>
  <!-- –•–µ–¥–µ—Ä –∫–∞–∫ –≤ base.html -->
  <header>
    <div class="logo">
      <a href="/">–ú–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</a>
    </div>

    <nav>
      {% if user.is_authenticated %}
        <a href="{% url 'dashboard' %}">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="{% url 'profile' user.username %}">–ü—Ä–æ—Ñ–∏–ª—å</a>
        <a href="{% url 'logout' %}" class="logout-btn">–í—ã–π—Ç–∏</a>
      {% else %}
        <a href="{% url 'login' %}">–í–æ–π—Ç–∏</a>
        <a href="{% url 'register' %}" class="logout-btn">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
      {% endif %}
    </nav>
  </header>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <div class="main-content">
    <div class="auth-container">
      
      <!-- –õ–µ–≤—ã–π –±–ª–æ–∫ -->
      <div class="auth-info-card">
        <div class="auth-header">
          <h1>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h1>
          <div class="platform-icon">üîê</div>
          <p class="platform-title">–ú–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è 444</p>
        </div>

        <div class="brief-description">
          <p>–í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</p>
        </div>

        <div class="auth-switch">
          <p>–ï—â–µ –Ω–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?</p>
          <a href="{% url 'register' %}" class="switch-link">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
        </div>
      </div>

      <!-- –ü—Ä–∞–≤—ã–π –±–ª–æ–∫ - –§–æ—Ä–º–∞ -->
      <div class="auth-form-card">
        <form method="post" class="auth-form" id="loginForm" novalidate>
          {% csrf_token %}

          <!-- –í—ã–≤–æ–¥ –æ–±—â–∏—Ö –æ—à–∏–±–æ–∫ -->
          {% if form.non_field_errors %}
            <div class="alert alert-error">
              {% for error in form.non_field_errors %}
                {{ error }}
              {% endfor %}
            </div>
          {% endif %}

          <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
          <div class="form-section">
            <h3>–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç</h3>
            
            <!-- –ü–æ–ª–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
            <div class="form-group">
              <label for="id_username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è *</label>
              <input type="text" name="username" id="id_username" 
                     value="{{ form.username.value|default:'' }}" 
                     placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ª–æ–≥–∏–Ω" required
                     autocomplete="username">
              {% if form.username.errors %}
                <div class="field-errors">
                  {% for error in form.username.errors %}
                    <span class="error">{{ error }}</span>
                  {% endfor %}
                </div>
              {% endif %}
            </div>

            <!-- –ü–æ–ª–µ –ø–∞—Ä–æ–ª—è -->
            <div class="form-group">
              <label for="id_password">–ü–∞—Ä–æ–ª—å *</label>
              <input type="password" name="password" id="id_password" 
                     placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å" required
                     autocomplete="current-password">
              {% if form.password.errors %}
                <div class="field-errors">
                  {% for error in form.password.errors %}
                    <span class="error">{{ error }}</span>
                  {% endfor %}
                </div>
              {% endif %}
            </div>

            <!-- –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è -->
            <div class="remember-group">
              <input type="checkbox" name="remember_me" id="id_remember_me">
              <label for="id_remember_me" class="remember-label">–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è</label>
            </div>

            <!-- –ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å -->
            <div class="forgot-password">
              <a href="/accounts/password-reset/">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
            </div>
          </div>

          <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
          <button type="submit" class="btn-primary" id="submitBtn">
            <span class="btn-text">–í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç</span>
            <span class="btn-loading" style="display: none;">‚è≥ –í—Ö–æ–¥–∏–º...</span>
          </button>

          <div class="auth-footer">
            –ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã? <a href="https://t.me/+JRCNgvvtxdtmMWUy" target="_blank" rel="noopener noreferrer">–ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É</a>
          </div>
        </form>
      </div>

    </div>
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('loginForm');
    const submitBtn = document.getElementById('submitBtn');
    const usernameInput = document.getElementById('id_username');
    const passwordInput = document.getElementById('id_password');

    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
    form.addEventListener('submit', function(e) {
      const btnText = submitBtn.querySelector('.btn-text');
      const btnLoading = submitBtn.querySelector('.btn-loading');

      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
      btnText.style.display = 'none';
      btnLoading.style.display = 'inline';
      submitBtn.disabled = true;

      // –ü—Ä–æ—Å—Ç–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
      let isValid = true;
      const requiredFields = [
        { field: usernameInput, name: '–∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è' },
        { field: passwordInput, name: '–ø–∞—Ä–æ–ª—å' }
      ];

      requiredFields.forEach(({ field, name }) => {
        if (!field.value.trim()) {
          isValid = false;
          field.classList.add('error-field');
          
          // –°–æ–∑–¥–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
          if (!field.nextElementSibling || !field.nextElementSibling.classList.contains('field-errors')) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'field-errors';
            const errorSpan = document.createElement('span');
            errorSpan.className = 'error';
            errorSpan.textContent = `–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ ${name}`;
            errorDiv.appendChild(errorSpan);
            field.parentNode.insertBefore(errorDiv, field.nextSibling);
          }
        } else {
          field.classList.remove('error-field');
          // –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ, –µ—Å–ª–∏ –æ–Ω–æ –µ—Å—Ç—å
          if (field.nextElementSibling && field.nextElementSibling.classList.contains('field-errors')) {
            field.nextElementSibling.remove();
          }
        }
      });

      if (!isValid) {
        e.preventDefault();
        btnText.style.display = 'inline';
        btnLoading.style.display = 'none';
        submitBtn.disabled = false;
      }
    });

    // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if (usernameInput) {
      usernameInput.focus();
    }

    // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞–≤–∏—à–∏ Enter
    form.addEventListener('keypress', function(e) {
      if (e.key === 'Enter' && e.target.tagName !== 'TEXTAREA') {
        e.preventDefault();
        form.submit();
      }
    });

    // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –æ—à–∏–±–∫–∏ –ø—Ä–∏ –≤–≤–æ–¥–µ
    [usernameInput, passwordInput].forEach(input => {
      if (input) {
        input.addEventListener('input', function() {
          this.classList.remove('error-field');
          // –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –ø—Ä–∏ –≤–≤–æ–¥–µ
          if (this.nextElementSibling && this.nextElementSibling.classList.contains('field-errors')) {
            this.nextElementSibling.remove();
          }
        });
      }
    });
  });
  </script>
</body>
</html>